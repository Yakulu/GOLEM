<?xml version="1.0" encoding="utf-8"?>

<!--
Copyright 2017 Fabien Bourgeois <fabien@yaltik.com>
Copyright 2018 Michel Dessenne <michel@yaltik.com>

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

<odoo>

      <template id="activity" inherit_id="golem_member.report_golem_member_template">
                <xpath expr="//th[@id='activity_inherit_th']" position="after">
                  <th>State</th>
                  <th>Price</th>
                </xpath>
                <xpath expr="//td[@id='activity_inherit_td']" position="after">
                  <td>
                    <span t-field="t.state" />
                  </td>
                  <td>
                    <span t-field="t.activity_price" t-field-options="{'widget': 'monetary',
                                    'display_currency': o.currency_id}"/>
                  </td>
                </xpath>

                <xpath expr="//tr[@id='activity_inherit_price_sum']" position="before">
                  <t t-set="price_sum" t-value="0"/>
                </xpath>
                <xpath expr="//tr[@id='activity_inherit_sum']" position="inside">

                    <t t-set="price_sum" t-value="price_sum + t.activity_price"/>

              </xpath>
              <xpath expr="//tfoot[@id='activity_inherit_total']" position="inside">
                  <tr>
                    <td>
                      <strong>TOTAL=<t t-esc="price_sum"
                        t-esc-options="{'widget': 'monetary',
                                        'display_currency': o.currency_id}" /></strong>
                    </td>
                  </tr>
            </xpath>

      </template>

</odoo>
